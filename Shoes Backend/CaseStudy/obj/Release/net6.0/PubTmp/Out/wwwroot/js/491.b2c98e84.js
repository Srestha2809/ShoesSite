"use strict";(self["webpackChunkcasestudy"]=self["webpackChunkcasestudy"]||[]).push([[491],{5572:(t,e,a)=>{a.d(e,{C:()=>c,_:()=>s});const r="/api/",s=async t=>{let e,a=l();try{let s=await fetch(`${r}${t}`,{method:"GET",headers:a});e=await s.json()}catch(s){console.log(s),e={error:`Error has occured: ${s.message}`}}return e},l=()=>{const t=new Headers,e=JSON.parse(sessionStorage.getItem("customer"));return e?(t.append("Content-Type","application/json"),t.append("Authorization","Bearer "+e.token)):t.append("Content-Type","application/json"),t},c=async(t,e)=>{let a,s=l();try{let l=await fetch(`${r}${t}`,{method:"POST",headers:s,body:JSON.stringify(e)});a=await l.json()}catch(c){a=c}return a}},7081:(t,e,a)=>{a.d(e,{p:()=>s,x:()=>r});const r=t=>t.toLocaleString("en-US",{style:"currency",currency:"USD"}),s=t=>{let e;e=void 0===t?new Date:new Date(Date.parse(t));let a=e.getDate(),r=e.getMonth()+1,s=e.getFullYear(),l=(e.getHours(),e.getMinutes());return l<10&&(l="0"+l),s+"-"+r+"-"+a}},6491:(t,e,a)=>{a.r(e),a.d(e,{default:()=>I});var r=a(9835),s=a(6970);const l={class:"text-center"},c=(0,r._)("div",{class:"text-h4 q-mt-md"},"Cart Contents",-1),o=["src"],n={class:"text-h6 text-positive"},d={key:0,style:{width:"90vw","margin-left":"5vw","margin-top":"1vh"}},u=(0,r.Uk)("Name"),i=(0,r.Uk)("QTY"),m=(0,r.Uk)("MSRP"),w=(0,r.Uk)("EXTENDED"),g=(0,r.Uk)("Sub:"),p=(0,r.Uk)("Tax(13%):"),f=(0,r.Uk)("Total:"),x={class:"text-center q-mt-md q-mb-lg"};function h(t,e,a,h,y,_){const b=(0,r.up)("q-item-section"),k=(0,r.up)("q-item"),W=(0,r.up)("q-list"),v=(0,r.up)("q-card"),q=(0,r.up)("q-scroll-area"),C=(0,r.up)("q-btn");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",l,[c,(0,r._)("img",{src:"cart.png",width:"100",height:"100"},null,8,o),(0,r._)("div",n,(0,s.zw)(h.state.status),1)]),h.state.cart.length>0?((0,r.wg)(),(0,r.iD)("div",d,[(0,r._)("div",null,[(0,r.Wm)(q,{style:{height:"55vh"}},{default:(0,r.w5)((()=>[(0,r.Wm)(v,{class:"q-ma-md"},{default:(0,r.w5)((()=>[(0,r.Wm)(W,{separator:""},{default:(0,r.w5)((()=>[(0,r.Wm)(k,{style:{bottom:"1vh"}},{default:(0,r.w5)((()=>[(0,r.Wm)(b,{class:"col-2 text-bold text-center text-red-8"},{default:(0,r.w5)((()=>[u])),_:1}),(0,r.Wm)(b,{class:"col-4 text-bold text-center text-red-8"},{default:(0,r.w5)((()=>[i])),_:1}),(0,r.Wm)(b,{class:"col-2 text-bold text-center text-red-8"},{default:(0,r.w5)((()=>[m])),_:1}),(0,r.Wm)(b,{class:"col-3 text-bold text-center text-red-8"},{default:(0,r.w5)((()=>[w])),_:1})])),_:1}),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(h.state.cart,(t=>((0,r.wg)(),(0,r.j4)(k,{key:t.id,clickable:""},{default:(0,r.w5)((()=>[(0,r.Wm)(b,{class:"text-left col-4"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(t.item.productName),1)])),_:2},1024),(0,r.Wm)(b,{class:"text-left col-1"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(t.qty),1)])),_:2},1024),(0,r.Wm)(b,{class:"text-right col-3"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(h.formatCurrency(t.item.msrp)),1)])),_:2},1024),(0,r.Wm)(b,{class:"text-right col-3"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(h.formatCurrency(t.item.msrp*t.qty)),1)])),_:2},1024)])),_:2},1024)))),128)),(0,r.Wm)(k,null,{default:(0,r.w5)((()=>[(0,r.Wm)(b,{class:"col-8 text-right text-bold"},{default:(0,r.w5)((()=>[g])),_:1}),(0,r.Wm)(b,{class:"text-right col-4 q-pr-md"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(h.formatCurrency(h.state.subTotal)),1)])),_:1})])),_:1}),(0,r.Wm)(k,null,{default:(0,r.w5)((()=>[(0,r.Wm)(b,{class:"col-8 text-right text-bold"},{default:(0,r.w5)((()=>[p])),_:1}),(0,r.Wm)(b,{class:"text-right col-4 q-pr-md"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(h.formatCurrency(h.state.tax)),1)])),_:1})])),_:1}),(0,r.Wm)(k,null,{default:(0,r.w5)((()=>[(0,r.Wm)(b,{class:"col-8 text-right text-red-8 text-bold"},{default:(0,r.w5)((()=>[f])),_:1}),(0,r.Wm)(b,{class:"text-right text-bold text-red-8 col-4 q-pr-md"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(h.formatCurrency(h.state.cartTotal)),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,r._)("div",x,[(0,r.Wm)(C,{color:"primary",label:"Clear cart",onClick:e[0]||(e[0]=t=>h.clearcart())}),(0,r.Wm)(C,{class:"q-mr-sm",color:"primary",label:"Save Order",disable:h.state.cart.length<1,onClick:e[1]||(e[1]=t=>h.saveCart())},null,8,["disable"])])])])):(0,r.kq)("",!0)],64)}var y=a(499),_=a(7081),b=a(5572);const k={setup(){let t=(0,y.qj)({status:"",totalQty:0,subTotal:0,tax:0,cartTotal:0,cart:[]});(0,r.bv)((()=>{sessionStorage.getItem("cart")?(t.cart=JSON.parse(sessionStorage.getItem("cart")),t.cart.forEach((e=>{t.totalQty+=e.qty,t.subTotal+=e.item.msrp*e.qty,t.tax=.13*t.subTotal,t.cartTotal=t.tax+t.subTotal}))):t.cart=[]}));const e=async()=>{let e=JSON.parse(sessionStorage.getItem("customer")),r=JSON.parse(sessionStorage.getItem("cart"));console.log(r);try{t.status="sending order info to server";let s={email:e.email,selections:r},l=await(0,b.C)("order",s);l.indexOf("not")>0||a(),t.status=l}catch(s){console.log(s),t.status=`Error add cart: ${s}`}},a=()=>{sessionStorage.removeItem("cart"),t.cart=[],t.status="cart emptied"};return{state:t,formatCurrency:_.x,clearcart:a,saveCart:e}}};var W=a(1639),v=a(1019),q=a(4458),C=a(3246),S=a(490),T=a(1233),U=a(4455),D=a(9984),z=a.n(D);const Q=(0,W.Z)(k,[["render",h]]),I=Q;z()(k,"components",{QScrollArea:v.Z,QCard:q.Z,QList:C.Z,QItem:S.Z,QItemSection:T.Z,QBtn:U.Z})}}]);